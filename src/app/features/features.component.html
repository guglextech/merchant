<div class="features-shell">
  <header class="hero">
    <h1 class="hero__title">Forecast Hub</h1>

    <button class="ghost-btn" (click)="gotoSettings()">
      <i class="bi bi-gear"></i>
      Account settings
    </button>
  </header>

  <div class="content">
    @if (showOldGames) {
      <section class="panel">
        <div class="panel__header">
          <div>
            <h2>Available products</h2>
            <p class="panel__hint">Tap a card to set the active match.</p>
          </div>
          <span class="chip">{{ oldGames.length }} listed</span>
        </div>

        <div class="game-grid">
          @for (game of oldGames; track game.gameId) {
            <article class="game-card" (click)="setMatch(game)">
              <div class="game-card__image">
                <img
                  [src]="game.gameImage"
                  [alt]="game.gameName"
                  loading="lazy"
                />
                <span class="pill">{{ game.tag }}</span>
              </div>

              <div class="game-card__body">
                <h3>{{ game.gameName }}</h3>
                <p>{{ game.gameShortcode }}</p>
              </div>

              <div class="game-card__actions">
                <button
                  class="link-btn"
                  [routerLink]="game.gameRoute"
                  (click)="setMatch(game); $event.stopPropagation()"
                >
                  Open
                  <i class="bi bi-arrow-up-right"></i>
                </button>
              </div>
            </article>
          }
        </div>
      </section>
    }

    @if (recentApps.length > 0) {
      <section class="panel">
        <div class="panel__header">
          <div>
            <h2>Recently opened</h2>
            <p class="panel__hint">Your last sessions across products.</p>
          </div>
          <span class="chip">{{ recentApps.length }} items</span>
        </div>

        <ul class="activity-list">
          @for (app of recentApps; track app.gameId) {
            <li class="activity-item">
              <div class="activity-item__indicator"></div>

              <div class="activity-item__content">
                <div class="activity-item__title">
                  <h3>{{ app.gameName }}</h3>
                  @if (app.forecastCreated) {
                    <span class="pill pill--success">Forecast ready</span>
                  }
                </div>
                <p>{{ app.timestamp | date: "medium" }}</p>
              </div>
            </li>
          }
        </ul>
      </section>
    }

    @if (recentApps.length === 0 && !showOldGames) {
      <div class="empty-state">
        <div class="empty-illustration">
          <span></span>
        </div>
        <h3>No recent activity</h3>
        <p>Launch a product to have it show up in your history.</p>
      </div>
    }
  </div>
</div>